<!DOCTYPE html>
<html>
	<head>
		<!-- Basic Page Info -->
		<meta charset="utf-8" />
		<title>Finance</title>

		<!-- Site favicon -->
	
		<!-- Mobile Specific Metas -->
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, maximum-scale=1"
		/>

		<!-- Google Font -->
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
			rel="stylesheet"
		/>
		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="vendors/styles/core.css" />
		<link
			rel="stylesheet"
			type="text/css"
			href="vendors/styles/icon-font.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="src/plugins/datatables/css/dataTables.bootstrap4.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="src/plugins/datatables/css/responsive.bootstrap4.min.css"
		/>
		<link rel="stylesheet" type="text/css" href="vendors/styles/style.css" />

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=G-GBZ3SGGX85"
		></script>
		<script
			async
			src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2973766580778258"
			crossorigin="anonymous"
		></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());

			gtag("config", "G-GBZ3SGGX85");
		</script>
		<!-- Google Tag Manager -->
		<script>
			(function (w, d, s, l, i) {
				w[l] = w[l] || [];
				w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
				var f = d.getElementsByTagName(s)[0],
					j = d.createElement(s),
					dl = l != "dataLayer" ? "&l=" + l : "";
				j.async = true;
				j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
				f.parentNode.insertBefore(j, f);
			})(window, document, "script", "dataLayer", "GTM-NXZMQSS");
		</script>
		<!-- End Google Tag Manager -->
	</head>
	<body>
		

		<div class="header">
			<div class="header-left">
				<div class="menu-icon bi bi-list"></div>
				<div
					class="search-toggle-icon bi bi-search"
					data-toggle="header_search"
				></div>
				<div class="header-search">
					<!--Nothing here-->
				</div>
			</div>
			<div class="header-right">
				<div class="dashboard-setting user-notification">
					<div class="dropdown">
						<a
							class="dropdown-toggle no-arrow"
							href="javascript:;"
							data-toggle="right-sidebar"
						>
							<i class="dw dw-settings2"></i>
						</a>
					</div>
				</div>
				
		
				<div class="user-info-dropdown">
					<div class="dropdown">
						<a
							class="dropdown-toggle"
							href="#"
							role="button"
							data-toggle="dropdown"
						>
							<span class="user-icon">
								<img src="src/images/person-circle-outline.svg" alt="" />
							</span>
							<span class="user-name" id="user-name1"></span>
						</a>
						<div
							class="dropdown-menu dropdown-menu-right dropdown-menu-icon-list"
						>
							
						
							<a class="dropdown-item" href="login.html"
								><i class="dw dw-logout"></i> Log Out</a
							>
						</div>
					</div>
				</div>
				
			</div>
		</div>

		<div class="right-sidebar">
			<div class="sidebar-title">
				<h3 class="weight-600 font-16 text-blue">
					Layout Settings
					<span class="btn-block font-weight-400 font-12"
						>User Interface Settings</span
					>
				</h3>
				<div class="close-sidebar" data-toggle="right-sidebar-close">
					<i class="icon-copy ion-close-round"></i>
				</div>
			</div>
			<div class="right-sidebar-body customscroll">
				<div class="right-sidebar-body-content">
					<h4 class="weight-600 font-18 pb-10">Header Background</h4>
					<div class="sidebar-btn-group pb-30 mb-10">
						<a
							href="javascript:void(0);"
							class="btn btn-outline-primary header-white active"
							>White</a
						>
						<a
							href="javascript:void(0);"
							class="btn btn-outline-primary header-dark"
							>Dark</a
						>
					</div>

					<h4 class="weight-600 font-18 pb-10">Sidebar Background</h4>
					<div class="sidebar-btn-group pb-30 mb-10">
						<a
							href="javascript:void(0);"
							class="btn btn-outline-primary sidebar-light"
							>White</a
						>
						<a
							href="javascript:void(0);"
							class="btn btn-outline-primary sidebar-dark active"
							>Dark</a
						>
					</div>

					<h4 class="weight-600 font-18 pb-10">Menu Dropdown Icon</h4>
					<div class="sidebar-radio-group pb-10 mb-10">
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebaricon-1"
								name="menu-dropdown-icon"
								class="custom-control-input"
								value="icon-style-1"
								checked=""
							/>
							<label class="custom-control-label" for="sidebaricon-1"
								><i class="fa fa-angle-down"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebaricon-2"
								name="menu-dropdown-icon"
								class="custom-control-input"
								value="icon-style-2"
							/>
							<label class="custom-control-label" for="sidebaricon-2"
								><i class="ion-plus-round"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebaricon-3"
								name="menu-dropdown-icon"
								class="custom-control-input"
								value="icon-style-3"
							/>
							<label class="custom-control-label" for="sidebaricon-3"
								><i class="fa fa-angle-double-right"></i
							></label>
						</div>
					</div>

					<h4 class="weight-600 font-18 pb-10">Menu List Icon</h4>
					<div class="sidebar-radio-group pb-30 mb-10">
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-1"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-1"
								checked=""
							/>
							<label class="custom-control-label" for="sidebariconlist-1"
								><i class="ion-minus-round"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-2"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-2"
							/>
							<label class="custom-control-label" for="sidebariconlist-2"
								><i class="fa fa-circle-o" aria-hidden="true"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-3"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-3"
							/>
							<label class="custom-control-label" for="sidebariconlist-3"
								><i class="dw dw-check"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-4"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-4"
								checked=""
							/>
							<label class="custom-control-label" for="sidebariconlist-4"
								><i class="icon-copy dw dw-next-2"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-5"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-5"
							/>
							<label class="custom-control-label" for="sidebariconlist-5"
								><i class="dw dw-fast-forward-1"></i
							></label>
						</div>
						<div class="custom-control custom-radio custom-control-inline">
							<input
								type="radio"
								id="sidebariconlist-6"
								name="menu-list-icon"
								class="custom-control-input"
								value="icon-list-style-6"
							/>
							<label class="custom-control-label" for="sidebariconlist-6"
								><i class="dw dw-next"></i
							></label>
						</div>
					</div>

					<div class="reset-options pt-30 text-center">
						<button class="btn btn-danger" id="reset-settings">
							Reset Settings
						</button>
					</div>
				</div>
			</div>
		</div>

		<div class="left-side-bar">
			<div class="brand-logo">
				
				<div class="close-sidebar" data-toggle="left-sidebar-close">
					<i class="ion-close-round"></i>
				</div>
			</div>
			<div class="menu-block customscroll">
				<div class="sidebar-menu">
					<ul id="accordion-menu">
						<li>
							<div class="sidebar-small-cap">Main</div>
						</li>
						<li class="dropdown">
							<a href="javascript:;" class="dropdown-toggle">
								<span class="micon bi bi-house"></span
								><span class="mtext">Home</span>
							</a>
							<ul class="submenu">
								<li><a  onclick="dashboard()">Dashboard</a></li>
							</ul>
						</li>
						<li>
							<div class="sidebar-small-cap">Ordering </div>
						</li>
						<li class="dropdown">
							<a href="javascript:;" class="dropdown-toggle">
								<span class="micon bi bi-cash"></span
								><span class="mtext">Register</span>
							</a>
							<ul class="submenu">
								<li><a onclick="control()">Control Panel</a></li>
								<li><a onclick="qr()">QR Generation</a></li>
								<li><a onclick="change()">Change Table</a></li>
								<li><a onclick="dineout()">Dine out/Delivery</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="javascript:;" class="dropdown-toggle">
								<span class=" micon bi bi-cup"></span>

								<span class="mtext">Kitchen</span>
							</a>
							<ul class="submenu">
								<li><a onclick="kitchen()">Kitchen Orders</a></li>
								
							</ul>
						</li>
						
						<li class="dropdown">
							<a href="javascript:;" class="dropdown-toggle">
								<span class=" micon bi bi-card-checklist"></span>

								<span class="mtext">Main Menu</span>
							</a>
							<ul class="submenu">
								<li><a onclick="menu()">Menu</a></li>
								
							</ul>
						</li>
						<li>
							<div class="sidebar-small-cap">Management </div>
						</li>
						<li class="dropdown">
							<a href="javascript:;" class="dropdown-toggle">
								<span class=" micon bi bi-people"></span>

								<span class="mtext">Users</span>
							</a>
							
							<ul class="submenu">
								<li><a onclick="editusers()">Edit Users</a></li>
								
							</ul>
						</li>
						<li class="dropdown">
							<a href="javascript:;" class="dropdown-toggle">
								<span class=" micon bi bi-person-check"></span>

								<span class="mtext">Shifts</span>
							</a>
							<ul class="submenu">
								<li><a onclick="shift()">Shift Mangement</a></li>
								
							</ul>
						</li>
						<li class="dropdown">
							<a href="javascript:;" class="dropdown-toggle">
								<span class=" micon bi bi-graph-up"></span>

								<span class="mtext">Finance</span>
							</a>
							<ul class="submenu">
								<li><a onclick="orders()" class="active">All orders</a></li>
								
							</ul>
						</li>
			
						
					</ul>
				</div>
			</div>
		</div>
		<div class="mobile-menu-overlay"></div>
		<style>
			.card {
		  display: flex;
		  flex-direction: column;
		  justify-content: space-around;
		  padding: 25px;
		  background-color: #ffffff;
		  box-sizing: border-box;
		  border: 1px solid #d2d2d3;
		  border-radius: 5px;
		  box-shadow: 0 6px 7px -4px rgba(0, 0, 0, 0.2);
		}
		
		.card:first-child {
		  border-left: 7px solid lightgreen;
		}
		
		.card:nth-child(2) {
		  border-left: 7px solid lightcoral;
		}
		
		.card:nth-child(3) {
		  border-left: 7px solid lightblue;
		}
		
		.card:nth-child(4) {
		  border-left: 7px solid slateblue;
		}
		.card > span {
		  font-size: 20px;
		  font-weight: 600;
		}
		
		.card-inner {
		  display: flex;
		  align-items: center;
		  justify-content: space-between;
		}
		
		.card-inner > p {
		  font-size: 18px;
		}
		
		.card-inner > span {
		  font-size: 35px;
		}
		.main-container {
		  grid-area: main;
		  overflow-y: auto;
		  padding: 20px 20px;
		}
		
		.main-title {
		  display: flex;
		  justify-content: space-between;
		}
		
		.main-title > p {
		  font-size: 20px;
		}
		
		.main-cards {
		  display: grid;
		  grid-template-columns: 1fr 1fr 1fr 1fr;
		  gap: 20px;
		  margin: 20px 0;
		}
		
		.card:hover{
			transition: .5s;
			transform: scale(1.05);
		}
		</style>
		<style>
			.card1 {
		  display: flex;
		  flex-direction: column;
		  justify-content: space-around;
		  padding: 25px;
		  background-color: #ffffff;
		  box-sizing: border-box;
		  border: 1px solid #d2d2d3;
		  border-radius: 5px;
		  box-shadow: 0 6px 7px -4px rgba(0, 0, 0, 0.2);
		}
		
		.card1:first-child {
		  border-left: 7px solid yellow;
		}
		
		.card1:nth-child(2) {
		  border-left: 7px solid wheat;
		}
		
		.card1:nth-child(3) {
		  border-left: 7px solid darkgray;
		}
		
		.card1:nth-child(4) {
		  border-left: 7px solid chocolate;
		}
		.card1 > span {
		  font-size: 20px;
		  font-weight: 600;
		}
		
		.card1-inner {
		  display: flex;
		  align-items: center;
		  justify-content: space-between;
		}
		
		.card1-inner > p {
		  font-size: 18px;
		}
		
		.card1-inner > span {
		  font-size: 35px;
		}
		.main1-container {
		  grid-area: main;
		  overflow-y: auto;
		  padding: 20px 20px;
		}
		
		.main1-title {
		  display: flex;
		  justify-content: space-between;
		}
		
		.main1-title > p {
		  font-size: 20px;
		}
		
		.main-cards1{
		  display: grid;
		  grid-template-columns: 1fr 1fr 1fr 1fr;
		  gap: 20px;
		  margin: 20px 0;
		}
		
		.card1:hover{
			transition: .5s;
			transform: scale(1.05);
		}
		</style>
<!-- Material Icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
		<div class="main-container">
			<div class="xs-pd-20-10 pd-ltr-20">
				<div class="title pb-20">
					<h2 class="h3 mb-0">Summary</h2>
				</div>

				<div class="row pb-40">
					<div class="col-md-14 mb-30" >
						<div class="card-box height-50-p pd-20" style="width: 1260px; margin-left: 1.20rem;">
							<div
								class="d-flex flex-wrap justify-content-between align-items-center pb-0 pb-md-4"
							>
							<div class="main-cards" style="margin-left: 12.5rem;">

					
			  
								<div class="card">
									<div class="card-inner">
									  <p >Total revenue</p>
									  <span class="material-icons-outlined" style="color: lightgreen;">request_page</span>
									</div>
									<span id="totalRevenue" style="color: lightgreen;"></span><span id="currency" style="color: lightgreen;"></span>
								  </div>
								  
								  <div class="card">
									<div class="card-inner">
									  <p style=" font-size: 1rem;">Total year revenue</p>
									  <span class="material-icons-outlined" style="color: lightcoral;">calendar_month</span>
									</div>
									<span style="color: lightcoral;" id="totalYearRevenue"></span><span id="currency1" style="color: lightcoral;"></span>
								  </div>
					  
								
					  
								<div class="card">
								  <div class="card-inner">
									<p style=" font-size: 1rem;">Most bought item</p>
									<span class="material-icons-outlined" style="color: slateblue;">fastfood</span>
								  </div>
								  <span style="color: slateblue;" id="mostBoughtItem"></span>
								</div>
					  
							  </div>
							  
							  
					</div>
					</div>
					</div>
				</div>
				<div class="row pb-40">
					<div class="col-md-14 mb-30" >
						<div class="card-box height-50-p pd-20" style="width: 1260px; margin-left: 1.20rem;">
							<div
								class="d-flex flex-wrap justify-content-between align-items-center pb-0 pb-md-4"
							>
							<div class="main-cards1" >

					
			  
								<div class="card1">
									<div class="card1-inner">
									  <p  style="font-size: 1rem;">Least bought item</p>
									  <span class="material-icons-outlined" style="color: yellow;">no_food</span>
									</div>
									<span id="leastBoughtItem" style="color: yellow;"></span>
								  </div>
								  
								  <div class="card1">
									<div class="card1-inner">
									  <p style=" font-size: 1rem;">Most bought breakfast item</p>
									  <span class="material-icons-outlined" style="color: wheat;">breakfast_dining</span>
									</div>
									<span style="color: wheat;" id="breakfastItem"></span>
								  </div>
					  
								<div class="card1">
								  <div class="card1-inner">
									<p style=" font-size: 1rem;">Most bought lunch item</p>
									<span class="material-icons-outlined" style="color: darkgrey">lunch_dining</span>
								  </div>
								  <span style="color:darkgrey;" id="lunchItem"></span>
								</div>
					  
								<div class="card1">
								  <div class="card1-inner">
									<p style=" font-size: 1rem;">Most bought dinner item</p>
									<span class="material-icons-outlined" style="color: chocolate;">dinner_dining</span>
								  </div>
								  <span style="color: chocolate;" id="dinnerItem"></span>
								</div>
					  
							  </div>
							  
							  
					</div>
					</div>
					</div>
				</div>
				

				<div class="row pb-10">
					<div class="col-md-8 mb-20">
						<div class="card-box height-100-p pd-20">
							<div
								class="d-flex flex-wrap justify-content-between align-items-center pb-0 pb-md-3"
							>
								<div class="h5 mb-md-0">Total revenue</div>
								<div class="form-group mb-md-0">
									<select id="chartSelector" class="form-control form-control-sm selectpicker">
										<option value="years">By years</option>
										<option value="months">In this year</option>
										<option value="days">In this month</option>
										<option value="hours">Today</option>
									</select>
								</div>
							</div>
							<div id="revenueGraphs">
							
								<div id="revenueOverYearsChart" style="display: none;"></div>
								<div id="revenueOverMonthsChart" style="display: none;"></div>
								<div id="revenueOverDaysChart" style="display: none;"></div>
								<div id="revenueOverHoursChart" style="display: none;"></div>
							  

							  
							</div>
							
						</div>
					</div>

					<div class="col-md-4 mb-20">
						<div
							class="card-box min-height-200px pd-20 mb-20"
							data-bgcolor="#455a64"
						>
						
							<div class="d-flex justify-content-between pb-20 text-white">
								<div class="icon h1 text-white">
									<span class="material-icons-outlined" style="font-size: 50px;">calendar_view_month</span>
									<!-- <i class="icon-copy fa fa-stethoscope" aria-hidden="true"></i> -->
								</div>
								<div class="font-14 text-right">
									<div id="percentage"><i class="icon-copy ion-arrow-up-c"></i></div>
									<div class="font-12">Since last month</div>
								</div>
							</div>
							<div class="d-flex justify-content-between align-items-end">
								<div class="text-white">
									<div class="font-14">Revenue of the month</div>
									<div class="font-24 weight-500" id="revenueOfThisMonth"></div>
								</div>
								<div class="max-width-150">
									<div id="appointment-chart"></div>
								</div>
							</div>
						</div>
						<div class="card-box min-height-200px pd-20" data-bgcolor="#265ed7">
							<div class="d-flex justify-content-between pb-20 text-white">
								<span class="material-icons-outlined" style="font-size: 50px;">today</span>
								<div class="font-14 text-right">
									<div id="percentage1"><i class="icon-copy ion-arrow-down-c"></i></div>
									<div class="font-12">Since yesterday</div>
								</div>
							</div>
							<div class="d-flex justify-content-between align-items-end">
								<div class="text-white">
									<div class="font-14">Revenue of today</div>
									<div class="font-24 weight-500" id="revenueOfToday"></div>
								</div>
								<div class="max-width-150">
									<div id="surgery-chart"></div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-lg-4 col-md-6 mb-20">
						<div class="card-box height-100-p pd-20 min-height-200px">
							<div class="d-flex justify-content-between pb-10">
								<div class="h5 mb-0">Top Cashier</div>
								
							</div>
							<div class="user-list">
								<ul>
									<li class="d-flex align-items-center justify-content-between">
										<div class="name-avatar d-flex align-items-center pr-2">
											<div class="avatar mr-2 flex-shrink-0">
												<img
													src="vendors/images/cashieruser.svg"
													class="border-radius-100 box-shadow"
													width="50"
													height="50"
													alt=""
												/>
											</div>
											<div class="txt">
												<span
													class="badge badge-pill badge-sm"
													data-bgcolor="#e7ebf5"
													data-color="#265ed7"
													>1</span
												>
												<div class="font-14 weight-600" id="cashier1"></div>
												<div class="font-12 weight-500" data-color="#b2b1b6" id="cashier1Sales">
													
												</div>
											</div>
										</div>
										
									</li>
									<li class="d-flex align-items-center justify-content-between">
										<div class="name-avatar d-flex align-items-center pr-2">
											<div class="avatar mr-2 flex-shrink-0">
												<img
												src="vendors/images/cashieruser.svg"
													class="border-radius-100 box-shadow"
													width="50"
													height="50"
													alt=""
												/>
											</div>
											<div class="txt">
												<span
													class="badge badge-pill badge-sm"
													data-bgcolor="#e7ebf5"
													data-color="#265ed7"
													>2</span
												>
												<div class="font-14 weight-600" id="cashier2"></div>
												<div class="font-12 weight-500" data-color="#b2b1b6" id="cashier2Sales">
													
												</div>
											</div>
										</div>
										
									</li>
									<li class="d-flex align-items-center justify-content-between">
										<div class="name-avatar d-flex align-items-center pr-2">
											<div class="avatar mr-2 flex-shrink-0">
												<img
												src="vendors/images/cashieruser.svg"

													class="border-radius-100 box-shadow"
													width="50"
													height="50"
													alt=""
												/>
											</div>
											<div class="txt">
												<span
													class="badge badge-pill badge-sm"
													data-bgcolor="#e7ebf5"
													data-color="#265ed7"
													>3</span
												>
												<div class="font-14 weight-600" id="cashier3"></div>
												<div class="font-12 weight-500" data-color="#b2b1b6" id="cashier3Sales">
													
												</div>
											</div>
										</div>
										
									</li>
									<li class="d-flex align-items-center justify-content-between">
										<div class="name-avatar d-flex align-items-center pr-2">
											<div class="avatar mr-2 flex-shrink-0">
												<img
												src="vendors/images/cashieruser.svg"

													class="border-radius-100 box-shadow"
													width="50"
													height="50"
													alt=""
												/>
											</div>
											<div class="txt">
												<span
													class="badge badge-pill badge-sm"
													data-bgcolor="#e7ebf5"
													data-color="#265ed7"
													>4</span
												>
												<div class="font-14 weight-600" id="cashier4"></div>
												<div class="font-12 weight-500" data-color="#b2b1b6" id="cashier4Sales">
													
												</div>
											</div>
										</div>
										
									</li>
								</ul>
							</div>
						</div>
					</div>
					
					<div class="col-md-8 mb-20">
						<div class="card-box height-100-p pd-20">
							<div
								class="d-flex flex-wrap justify-content-between align-items-center pb-0 pb-md-3"
							>
								<div class="h5 mb-md-0">Cashier Orders</div>
								<div class="form-group mb-md-0">
									
								</div>
							</div>
							
							
								<div id="cashierComparisonChart"></div>
								
							  

							  
						
							
						</div>
					</div>
					<div class="col-lg-4 col-md-6 mb-20">
						<div class="card-box height-100-p pd-20 min-height-200px">
							<div class="d-flex justify-content-between pb-10">
								<div class="h5 mb-0">Dine out vs. Dine in</div>
								<br>
								<br>
								<br>
								<br>
							</div>
							<div id="dineChart"></div>
						</div>
					</div>
					
					<div class="col-md-8 mb-20" style="height: 400px;">
						<div class="card-box height-100-p pd-20">
							<div class="h5 mb-md-0">Most recent orders</div>
							<br>
							<div
								class="d-flex flex-wrap justify-content-between align-items-center pb-0 pb-md-3"
							>
								
								<div class="form-group mb-md-0">
									<div class="table-responsive" style="width: 800px; height: 500px;">
										<table class="table table-striped">
											<tr>
												<!-- Add data-sort attribute to the th elements for sorting -->
												<th data-sort="name">Name</th>
												<th data-sort="price">Price</th>
												<th data-sort="category">Category</th>
												<th data-sort="orderTime">Order Time</th>
												<th>Cashier</th>
												<th>Order Mode</th>
											</tr>
										</thead>
										<tbody id="recentOrders">
											
										</tbody>
									</table>
								
								</div>
								</div>
							</div>
							
						
						</div>
					</div>
				</div>
				
			</div>
				<div class="xs-pd-20-10 pd-ltr-20">
					
	
				<div class="card-box pb-10">
					<div class="h5 pd-20 mb-0">All orders</div>
					<div class="table-responsive">
						<table class="table table-striped">
							<tr>
								<!-- Add data-sort attribute to the th elements for sorting -->
								<th data-sort="name">Name</th>
								<th data-sort="price">Price</th>
								<th data-sort="category">Category</th>
								<th data-sort="orderTime">Order Time</th>
								<th>Cashier</th>
								<th>Order Mode</th>
							</tr>
						</thead>
						<tbody id="tableViewBody">
							
						</tbody>
					</table>
				<br>
				<br>
				<br>
				</div>
					
						
					
						  <!-- Table View -->
						  <div id="tableView">
							
							
				</div>

			
		<!-- welcome modal end -->
		<!-- js -->
		<script src="vendors/scripts/core.js"></script>
		<script src="vendors/scripts/script.min.js"></script>
		<script src="vendors/scripts/process.js"></script>
		<script src="vendors/scripts/layout-settings.js"></script>
		<script src="src/plugins/apexcharts/apexcharts.min.js"></script>
		<script src="src/plugins/datatables/js/jquery.dataTables.min.js"></script>
		<script src="src/plugins/datatables/js/dataTables.bootstrap4.min.js"></script>
		<script src="src/plugins/datatables/js/dataTables.responsive.min.js"></script>
		<script src="src/plugins/datatables/js/responsive.bootstrap4.min.js"></script>
		<script src="vendors/scripts/dashboard3.js"></script>
		<!-- Google Tag Manager (noscript) -->
		<noscript
			><iframe
				src="https://www.googletagmanager.com/ns.html?id=GTM-NXZMQSS"
				height="0"
				width="0"
				style="display: none; visibility: hidden"
			></iframe
		></noscript>
		<!-- End Google Tag Manager (noscript) -->

            
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script>
   function checkEnteredUser(){
      const urlParams = new URLSearchParams(window.location.search);
      const code = urlParams.get('code');
      const username = urlParams.get('username');
      const role = urlParams.get('role');
      
      if(!code || !username || !role){
        return window.location.href = "/menu.html"
      }
      
      if(role=="admin" || role=="finance"){
       
      }else{
        return window.location.href = "/menu.html"
      }
    }
    checkEnteredUser()
	function userName(){

const urlParams = new URLSearchParams(window.location.search);
const username = urlParams.get('username');

const i1 = document.getElementById("user-name1");
i1.textContent = username
}
userName()

function kitchen() {
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `kitchen.html?code=${code}&role=${encodeURIComponent(role)}&username=${encodeURIComponent(username)}`;
}

function shift() {
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `shift.html?code=${code}&role=${encodeURIComponent(role)}&username=${encodeURIComponent(username)}`;
}

function qr() {
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `qr.html?code=${code}&role=${encodeURIComponent(role)}&username=${encodeURIComponent(username)}`;
}

function control() {
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `register.html?code=${code}&role=${encodeURIComponent(role)}&username=${encodeURIComponent(username)}`;
}

function menu() {
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `menu.html?code=${code}&role=${encodeURIComponent(role)}&username=${encodeURIComponent(username)}`;
}

function orders() {
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `orders.html?code=${code}&role=${encodeURIComponent(role)}&username=${encodeURIComponent(username)}`;
}

function editusers() {
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `edit-users.html?code=${code}&role=${role}&username=${username}`;
}

function dashboard() {
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `dashboard.html?code=${code}&role=${role}&username=${username}`;
}

function dineout() {
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `dineout.html?code=${code}&role=${role}&username=${username}`;
}
function change(){
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');
const username = urlParams.get('username');
const role = urlParams.get('role');
window.location.href = `changetable.html?code=${code}&role=${role}&username=${username}`;
}

</script>

<script>

  // Function to create a list of least bought items
  function createLeastBoughtItemsList(orders) {
    const itemOccurrences = {};

    orders.forEach((order) => {
      if (itemOccurrences.hasOwnProperty(order.name)) {
        itemOccurrences[order.name]++;
      } else {
        itemOccurrences[order.name] = 1;
      }
    });

    const leastBoughtItems = Object.keys(itemOccurrences).sort((a, b) => itemOccurrences[a] - itemOccurrences[b]);

    const leastBoughtItemsList = document.getElementById('leastBoughtItemsList');
    leastBoughtItemsList.innerHTML = '';

    const leastBoughtItemsNames = leastBoughtItems.filter((item) => itemOccurrences[item] === 1);
    
    if (leastBoughtItemsNames.length === 0) {
      const listItem = document.createElement('li');
      listItem.textContent = "No items sold only once.";
      leastBoughtItemsList.appendChild(listItem);
    } else {
      leastBoughtItemsNames.forEach((item) => {
        const listItem = document.createElement('li');
        listItem.textContent = item;
        leastBoughtItemsList.appendChild(listItem);
      });
    }
  }


    const revenueOverYearsChart = document.getElementById('revenueOverYearsChart');
    const revenueOverMonthsChart = document.getElementById('revenueOverMonthsChart');

  
    
    



            // Function to create a line chart for total revenue over the years
            function createRevenueOverYearsChart(orders, currency) {
            const currentYear = new Date().getFullYear();
            const years = Array.from({ length: 12 }, (_, index) => currentYear - 10 + index);
            
            const revenueByYear = years.map((year) => {
                return orders
                    .filter((order) => new Date(order.orderTime).getFullYear() === year)
                    .reduce((sum, order) => sum + order.price, 0);
            });
			var options = {
				series: [{
                    name: 'Total Revenue Over Years',
                    data: revenueByYear,
                }],
                title: {
                    text: 'Total Revenue Over Years',
                    align: 'center',
                },
				chart: {
                    height: 350,
                    type: 'line',
                    toolbar: {
                show: true, // Display the toolbar
                tools: {
                    download: true, // Enable the download option
                },
            },
                },
	grid: {
		show: false,
		padding: {
			left: 0,
			right: 0
		}
	},
	stroke: {
		width: 7,
		curve: 'smooth'
	},
	
	title: {
		text: 'Revenue of years',
		align: 'left',
		style: {
			fontSize: "16px",
			color: '#666'
		}
	},
	fill: {
		type: 'gradient',
		gradient: {
			shade: 'dark',
			gradientToColors: [ '#1b00ff'],
			shadeIntensity: 1,
			type: 'horizontal',
			opacityFrom: 1,
			opacityTo: 1,
			stops: [0, 100, 100, 100]
		},
	},
	markers: {
		size: 4,
		colors: ["#FFA41B"],
		strokeColors: "#fff",
		strokeWidth: 2,
		hover: {
			size: 7,
		}
	},
	xaxis: {
                    categories: years,
                },
                yaxis: {
                    labels: {
                        formatter: (value) => `${currency}` + value.toFixed(2),
                    },
                },
};

            const chart = new ApexCharts(document.getElementById("revenueOverYearsChart"), options);
            chart.render();
        }


		function createRevenueOverMonthsChart(orders, currency) {
            const currentYear = new Date().getFullYear();
            const currentMonth = new Date().getMonth() + 1;
            const months = Array.from({ length: 12 }, (_, index) => (currentMonth + index) % 12 || 12);
            
            const revenueByMonth = months.map((month) => {
                return orders
                    .filter((order) => {
                        const orderDate = new Date(order.orderTime);
                        return orderDate.getFullYear() === currentYear && orderDate.getMonth() + 1 === month;
                    })
                    .reduce((sum, order) => sum + order.price, 0);
            });

            const options = {
				chart: {
                    height: 350,
                    type: 'line',
                    toolbar: {
                show: true, // Display the toolbar
                tools: {
                    download: true, // Enable the download option
                },
            },
                },
	grid: {
		show: false,
		padding: {
			left: 0,
			right: 0
		}
	},
	stroke: {
		width: 7,
		curve: 'smooth'
	},
	
	title: {
		text: 'Revenue of all the months of the year',
		align: 'left',
		style: {
			fontSize: "16px",
			color: '#666'
		}
	},
	fill: {
		type: 'gradient',
		gradient: {
			shade: 'dark',
			gradientToColors: [ '#1b00ff'],
			shadeIntensity: 1,
			type: 'horizontal',
			opacityFrom: 1,
			opacityTo: 1,
			stops: [0, 100, 100, 100]
		},
	},
	markers: {
		size: 4,
		colors: ["#FFA41B"],
		strokeColors: "#fff",
		strokeWidth: 2,
		hover: {
			size: 7,
		}
	},
                xaxis: {
                    categories: months,
                },
                yaxis: {
                    labels: {
                        formatter: (value) => `${currency}` + value.toFixed(2),
                    },
                },
               
                series: [{
                    name: 'Total Revenue Over Months',
                    data: revenueByMonth,
                }]
			}

            const chart = new ApexCharts(document.querySelector("#revenueOverMonthsChart"), options);
            chart.render();
        }
		function createRevenueComparisonChart(orders, currency) {
            const currentYear = new Date().getFullYear();
            const currentMonth = new Date().getMonth() + 1;
            const daysInCurrentMonth = new Date(currentYear, currentMonth, 0).getDate();

            const days = Array.from({ length: daysInCurrentMonth }, (_, index) => index + 1);
            
            const revenueByDay = days.map((day) => {
                return orders
                    .filter((order) => {
                        const orderDate = new Date(order.orderTime);
                        return (
                            orderDate.getFullYear() === currentYear &&
                            orderDate.getMonth() + 1 === currentMonth &&
                            orderDate.getDate() === day
                        );
                    })
                    .reduce((sum, order) => sum + order.price, 0);
            });

            const options = {
				chart: {
                    height: 350,
                    type: 'line',
                    toolbar: {
                show: true, // Display the toolbar
                tools: {
                    download: true, // Enable the download option
                },
            },
                },
                grid: {
                    show: false,
                    padding: {
                        left: 0,
                        right: 0
                    }
                },
                stroke: {
                    width: 7,
                    curve: 'smooth'
                },
                title: {
                    text: 'Revenue Comparison for Current Month',
                    align: 'left',
                    style: {
                        fontSize: "16px",
                        color: '#666'
                    }
                },
                fill: {
                    type: 'gradient',
                    gradient: {
                        shade: 'dark',
                        gradientToColors: ['#1b00ff'],
                        shadeIntensity: 1,
                        type: 'horizontal',
                        opacityFrom: 1,
                        opacityTo: 1,
                        stops: [0, 100, 100, 100]
                    },
                },
                markers: {
                    size: 4,
                    colors: ["#FFA41B"],
                    strokeColors: "#fff",
                    strokeWidth: 2,
                    hover: {
                        size: 7,
                    }
                },
                xaxis: {
                    categories: days,
                },
                yaxis: {
                    labels: {
                        formatter: (value) => `${currency}` + value.toFixed(2),
                    },
                },
                series: [{
                    name: 'Total Revenue for Current Month',
                    data: revenueByDay,
                }]
            };

            const chart = new ApexCharts(document.querySelector("#revenueOverDaysChart"), options);
            chart.render();
        }

       

      

    // Helper function to sort the orders based on a specific property
    function sortByProperty(property, ascending = true) {
        return function (a, b) {
            const aValue = a[property];
            const bValue = b[property];

            if (aValue < bValue) {
                return ascending ? -1 : 1;
            } else if (aValue > bValue) {
                return ascending ? 1 : -1;
            }
            return 0;
        };
    }

 
   

  
       
           
          
          
       
	function createCashierComparisonChart(orders, currency) {
  const cashierData = {};

  orders.forEach((order) => {
    if (cashierData.hasOwnProperty(order.cashier)) {
      cashierData[order.cashier].totalRevenue += order.price;
      cashierData[order.cashier].orderTimes.push(order.orderTime);
    } else {
      cashierData[order.cashier] = {
        totalRevenue: order.price,
        orderTimes: [order.orderTime],
      };
    }
  });

  const cashierNames = Object.keys(cashierData);
  const totalRevenues = cashierNames.map((name) => cashierData[name].totalRevenue);
  const orderTimes = cashierNames.map((name) => cashierData[name].orderTimes.join(', '));

  const options = {
	chart: {
                    height: 350,
                    type: 'bar',
                    toolbar: {
                show: true, // Display the toolbar
                tools: {
                    download: true, // Enable the download option
                },
            },
		},
    plotOptions: {
      bar: {
        horizontal: false,
        columnWidth: '55%',
      },
    },
	 stroke: {
                    width: 7,
                    curve: 'smooth'
                },
    dataLabels: {
      enabled: false,
    },
  
    series: [
      {
        name: 'Total Revenue',
        data: totalRevenues,
      },
    ],
    xaxis: {
      categories: cashierNames,
    },
    yaxis: {
      title: {
        text: 'Total Revenue',
      },
    },
    fill: {
      opacity: 1,
    },
    tooltip: {
      y: {
        formatter: function (val) {
          return `${val.toFixed(2)}${currency}`;
        },
      },
      x: {
        formatter: function (val, { series, seriesIndex, dataPointIndex, w }) {
          return cashierNames[dataPointIndex];
        },
      },
      marker: {
        show: true,
      },
    },
  };

  const chart = new ApexCharts(document.querySelector('#cashierComparisonChart'), options);
  chart.render();
}


function createHourlyRevenueComparisonChart(orders, currency) {
            const currentYear = new Date().getFullYear();
            const currentMonth = new Date().getMonth() + 1;
            const currentDay = new Date().getDate();

			const hours = Array.from({ length: 24 }, (_, index) => index);

const revenueByHour = hours.map((hour) => {
  return orders
	.filter((order) => {
	  const orderDate = new Date(order.orderTime);
	  // Convert the order time to GMT+3
	  orderDate.setUTCHours(orderDate.getUTCHours() + 3);
	  return (
		orderDate.getFullYear() === currentYear &&
		orderDate.getMonth() + 1 === currentMonth &&
		orderDate.getDate() === currentDay &&
		orderDate.getHours() === hour
	  );
	})
	.reduce((sum, order) => sum + order.price, 0);
});


            const options = {
                chart: {
                    height: 350,
                    type: 'line',
                    toolbar: {
                show: true, // Display the toolbar
                tools: {
                    download: true, // Enable the download option
                },
            },
                },
                grid: {
                    show: false,
                    padding: {
                        left: 0,
                        right: 0
                    }
                },
                stroke: {
                    width: 7,
                    curve: 'smooth'
                },
                title: {
                    text: 'Hourly Revenue Comparison for Today',
                    align: 'left',
                    style: {
                        fontSize: "16px",
                        color: '#666'
                    }
                },
                fill: {
                    type: 'gradient',
                    gradient: {
                        shade: 'dark',
                        gradientToColors: ['#1b00ff'],
                        shadeIntensity: 1,
                        type: 'horizontal',
                        opacityFrom: 1,
                        opacityTo: 1,
                        stops: [0, 100, 100, 100]
                    },
                },
                markers: {
                    size: 4,
                    colors: ["#FFA41B"],
                    strokeColors: "#fff",
                    strokeWidth: 2,
                    hover: {
                        size: 7,
                    }
                },
                xaxis: {
                    categories: hours,
                },
                yaxis: {
                    labels: {
                        formatter: (value) => `${currency}` + value.toFixed(2),
                    },
                },
                series: [{
                    name: 'Total Revenue for Today',
                    data: revenueByHour,
                }],
				
            };

            const chart = new ApexCharts(document.querySelector("#revenueOverHoursChart"), options);
            chart.render();
        }
// Function to update the leastBoughtItemsList with the least bought item
function updateLeastBoughtItemsList(orders) {
  const leastBoughtItemsList = document.getElementById('leastBoughtItemsList');
  leastBoughtItemsList.innerHTML = '';

  // Call the findLeastBoughtItem function to get the least bought item
  const leastBoughtItem = findLeastBoughtItem(orders);

  // If no least bought item is found, display a message
  if (!leastBoughtItem) {
    const listItem = document.createElement('li');
    listItem.textContent = 'No items found.';
    leastBoughtItemsList.appendChild(listItem);
  } else {
    const listItem = document.createElement('li');
    listItem.textContent = leastBoughtItem;
    leastBoughtItemsList.appendChild(listItem);
  }
}function populateCashierSales(orders) {
  const cashierData = {};

  orders.forEach((order) => {
    if (cashierData.hasOwnProperty(order.cashier)) {
      cashierData[order.cashier].totalSales++;
    } else {
      cashierData[order.cashier] = {
        totalSales: 1,
      };
    }
  });

  const sortedCashiers = Object.keys(cashierData).sort((a, b) => cashierData[b].totalSales - cashierData[a].totalSales);

  for (let i = 1; i <= 4; i++) {
    const cashierNameElement = document.getElementById(`cashier${i}`);
    const cashierSalesElement = document.getElementById(`cashier${i}Sales`);

    if (sortedCashiers[i - 1]) {
      const cashierName = sortedCashiers[i - 1];
      const totalSales = cashierData[cashierName].totalSales;

      cashierNameElement.textContent = cashierName;
      cashierSalesElement.textContent = `${totalSales} sales`;
    } else {
      cashierNameElement.textContent = '';
      cashierSalesElement.textContent = '';
    }
  }
}
function createModeDistributionChart(orders) {
  const modeCounts = {};
  const totalOrders = orders.length;

  orders.forEach((order) => {
    if (modeCounts.hasOwnProperty(order.mode)) {
      modeCounts[order.mode]++;
    } else {
      modeCounts[order.mode] = 1;
    }
  });

  const modeLabels = Object.keys(modeCounts);
  const modeData = modeLabels.map((mode) => (modeCounts[mode] / totalOrders) * 100);

  const options = {
    series: modeData,
    chart: {
      type: 'pie',
	  toolbar: {
                show: true, // Display the toolbar
                tools: {
                    download: true, // Enable the download option
                },
            },
    },
    labels: modeLabels,
	responsive: [{
		breakpoint: 480,
		options: {
			chart: {
				width: 1000
			},
			legend: {
				position: 'bottom'
			}
		}
	}]
  };

  const chart = new ApexCharts(document.querySelector('#dineChart'), options);
  chart.render();
}
// Function to update the summary section with the calculated data
function updateSummary(orders, currency) {
	 // Sort orders by orderTime in descending order (most recent first)
	 const sortedOrders = orders.sort((a, b) => new Date(b.orderTime) - new Date(a.orderTime));

// Get the table body element
const recentOrdersTableBody = document.getElementById('recentOrders');

// Display up to the 5 most recent orders in the table
for (let i = 0; i < Math.min(5, sortedOrders.length); i++) {
  const order = sortedOrders[i];
  const newRow = document.createElement('tr');
  newRow.innerHTML = `
	<td>${order.name}</td>
	<td>${order.price}</td>
	<td>${order.category}</td>
	<td>${order.orderTime}</td>
	<td>${order.cashier}</td>
	<td>${order.mode}</td>
  `;
  recentOrdersTableBody.appendChild(newRow);
}
	
			createCashierComparisonChart(orders, currency)
  			createRevenueOverMonthsChart(orders, currency)
  			createRevenueComparisonChart(orders, currency)
 			createHourlyRevenueComparisonChart(orders, currency);
            createRevenueOverYearsChart(orders, currency)
			createModeDistributionChart(orders)
            populateCashierSales(orders)
            
		
 
}
function calculateTotalRevenue(ordersArray) {
  if (ordersArray.length === 0) {
    return 0;
  }
  return ordersArray.reduce((total, order) => total + order.price, 0);
}

// Function to calculate total year revenue
function calculateTotalYearRevenue(ordersArray) {
	
  const currentYear = new Date().getFullYear();
  const yearOrders = ordersArray.filter(order => new Date(order.orderTime).getFullYear() === currentYear);
  return calculateTotalRevenue(yearOrders);
}




// Function to find most bought item
function findMostBoughtItem(ordersArray) {
  const itemCounts = {};
  ordersArray.forEach(order => {
    if (!itemCounts[order.name]) {
      itemCounts[order.name] = 1;
    } else {
      itemCounts[order.name]++;
    }
  });

  const itemNames = Object.keys(itemCounts);
  if (itemNames.length === 0) {
    return null; // or whatever you want to return for an empty array
  }

  const mostBoughtItem = itemNames.reduce((a, b) => (itemCounts[a] > itemCounts[b] ? a : b));
  return mostBoughtItem;
}

// Function to find least bought item
function findLeastBoughtItem(ordersArray) {
  const itemCounts = {};
  ordersArray.forEach(order => {
    if (!itemCounts[order.name]) {
      itemCounts[order.name] = 1;
    } else {
      itemCounts[order.name]++;
    }
  });
  const leastBoughtItem = Object.keys(itemCounts).reduce((a, b) => (itemCounts[a] < itemCounts[b] ? a : b));
  return leastBoughtItem;
}

// Function to find most bought breakfast item
function findMostBoughtItemDuringTime(ordersArray, startTime, endTime) {
  const timeOrders = ordersArray.filter(order => {
    const orderTime = new Date(order.orderTime).getHours();
    return orderTime >= startTime && orderTime <= endTime;
  });

  return findMostBoughtItem(timeOrders);
}

// Function to find most bought breakfast item
function findMostBoughtBreakfastItem(ordersArray) {
  return findMostBoughtItemDuringTime(ordersArray, 6, 10); // From 6am to 10am
}

// Function to find most bought lunch item
function findMostBoughtLunchItem(ordersArray) {
  return findMostBoughtItemDuringTime(ordersArray, 11, 14); // From 11am to 2pm
}

// Function to find most bought dinner item
function findMostBoughtDinnerItem(ordersArray) {
  return findMostBoughtItemDuringTime(ordersArray, 18, 21); // From 6pm to 9pm
}
function calculateRevenueForToday(ordersArray) {
  const currentDate = new Date();
  const todayOrders = ordersArray.filter(order => {
    const orderDate = new Date(order.orderTime);
    return isSameDay(orderDate, currentDate);
  });

  return todayOrders.reduce((totalRevenue, order) => totalRevenue + order.price, 0);
}
function calculateTotalRevenueYesterday(ordersArray) {
  const yesterday = new Date();
  yesterday.setDate(yesterday.getDate() - 1);

  const yesterdayOrders = ordersArray.filter(
    order => new Date(order.orderTime).toDateString() === yesterday.toDateString()
  );

  return calculateTotalRevenue(yesterdayOrders);
}

// Function to calculate total revenue of last month
function calculateTotalRevenueLastMonth(ordersArray) {
  const today = new Date();
  const lastMonthStart = new Date(today.getFullYear(), today.getMonth() - 1, 1);
  const lastMonthEnd = new Date(today.getFullYear(), today.getMonth(), 0);

  const lastMonthOrders = ordersArray.filter(
    order =>
      new Date(order.orderTime) >= lastMonthStart && new Date(order.orderTime) <= lastMonthEnd
  );

  return calculateTotalRevenue(lastMonthOrders);
}
function calculateRevenueForThisMonth(ordersArray) {
  const currentDate = new Date();
  const thisMonthOrders = ordersArray.filter(order => {
    const orderDate = new Date(order.orderTime);
    return orderDate.getMonth() === currentDate.getMonth() && orderDate.getFullYear() === currentDate.getFullYear();
  });

  return thisMonthOrders.reduce((totalRevenue, order) => totalRevenue + order.price, 0);
}

function isSameDay(date1, date2) {
  return date1.getDate() === date2.getDate() &&
    date1.getMonth() === date2.getMonth() &&
    date1.getFullYear() === date2.getFullYear();
}

function calculatePercentageChange(oldValue, newValue){
	
  const change = newValue - oldValue;
  const percentageChange = (change / oldValue) * 100;

  return percentageChange.toFixed(2); // Round to two decimal places
}
function populateCards(ordersArray, currency) {
	const revenueOfToday = calculateRevenueForToday(ordersArray);
const revenueOfThisMonth = calculateRevenueForThisMonth(ordersArray);
const oldMonth = calculateTotalRevenueLastMonth(ordersArray)
const oldDay = calculateTotalRevenueYesterday(ordersArray)


const percentageChangeToday = calculatePercentageChange(oldDay ,revenueOfToday);
const percentageChangeThisMonth = calculatePercentageChange(oldMonth, revenueOfThisMonth);

document.getElementById('revenueOfToday').textContent = revenueOfToday + currency;
document.getElementById('revenueOfThisMonth').textContent = revenueOfThisMonth + currency;
document.getElementById('percentage1').textContent = `Change: ${percentageChangeToday}%`;
document.getElementById('percentage').textContent = `Change: ${percentageChangeThisMonth}%`;
  const totalRevenueElement = document.getElementById('totalRevenue');
  const currencyElement = document.getElementById('currency');
  const totalYearRevenueElement = document.getElementById('totalYearRevenue');
  const currency1Element = document.getElementById('currency1');
 
  
  const mostBoughtItemElement = document.getElementById('mostBoughtItem');
  const leastBoughtItemElement = document.getElementById('leastBoughtItem');
  const breakfastItemElement = document.getElementById('breakfastItem');
  const lunchItemElement = document.getElementById('lunchItem');
  const dinnerItemElement = document.getElementById('dinnerItem');
  

  



  const totalRevenue = calculateTotalRevenue(ordersArray);
  const totalYearRevenue = calculateTotalYearRevenue(ordersArray);

  const mostBoughtItem = findMostBoughtItem(ordersArray);
  const leastBoughtItem = findLeastBoughtItem(ordersArray);
  const breakfastItem = findMostBoughtBreakfastItem(ordersArray);
  const lunchItem = findMostBoughtLunchItem(ordersArray);
  const dinnerItem = findMostBoughtDinnerItem(ordersArray);
  
  // Populate the elements with the extracted data
  totalRevenueElement.textContent = totalRevenue;
  currencyElement.textContent = currency;
  totalYearRevenueElement.textContent = totalYearRevenue;
  currency1Element.textContent = currency;


  mostBoughtItemElement.textContent = mostBoughtItem;
  leastBoughtItemElement.textContent = leastBoughtItem;
  breakfastItemElement.textContent = breakfastItem;
  lunchItemElement.textContent = lunchItem;
  dinnerItemElement.textContent = dinnerItem;
}

            // Function to fetch all orders from the server and populate both views
            function fetchAndPopulateOrders(currency) {
                fetch('/api/orders')
                    .then((response) => response.json())
                    .then((orders) => {

                      function formatOrderTime(orderTime) {
    const orderDateTime = new Date(orderTime);
    const gmtOffset = 3; // GMT+3

    // Adjust the time based on the GMT offset
    orderDateTime.setHours(orderDateTime.getHours() + gmtOffset);

    const options = {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        timeZoneName: 'short',
    };

    const formattedDateTime = orderDateTime.toLocaleString('en-US', options);
    return formattedDateTime;
}

                     
                        tableViewBody.innerHTML = '';

                        orders.forEach((order) => {
                            // Populate individual view
                            const orderItem = document.createElement('div');
                            orderItem.className = 'order-item';

                            const name = document.createElement('p');
                            name.textContent = `Name: ${order.name}`;

                            const price = document.createElement('p');
                            price.textContent = `Price: ${order.price}${currency}`;

                            const category = document.createElement('p');
                            category.textContent = `Category: ${order.category}`;

                            const orderTime = document.createElement('p');
                            const fullOrderTime = formatOrderTime(order.orderTime)
                            orderTime.textContent = `Order Time: ${fullOrderTime}`;

                            const orderCashier = document.createElement("p")
                            orderCashier.textContent = `Cashier: ${order.cashier}`
                           
                           
                            

                            // Populate table view
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${order.name}</td>
                                <td>${order.price}${currency}</td>
                                <td>${order.category}</td>
                                <td>${fullOrderTime}</td>
                                <td>${order.cashier}</td>
                                <td>${order.mode}</td>
                            `;
                            tableViewBody.appendChild(row);
                        });
                          
						updateSummary(orders, currency);
						const uniqueOrdersArray = [];

					
						const seenNames = new Set();


						for (const order of orders) {
  							if (!seenNames.has(order.name)) {
   						 	uniqueOrdersArray.push(order);
    						seenNames.add(order.name);
 							}
						}
						populateCards( orders,currency)
                    })
					
                    .catch((error) => {
                        console.error('Error loading orders:', error);
                    });
            }

            async function getCurrency1() {
  try {
    const response = await fetch('/api/env');
    const data = await response.json();
    return data.currency;
  } catch (error) {
    console.error('Error fetching environment variables:', error);
    return null;
  }
}
 

async function loadCategoryItems(category) {
  const currency = await getCurrency1();
  
  const chartSelector = document.getElementById('chartSelector');
  const revenueOverYearsChart = document.getElementById('revenueOverYearsChart');
  const revenueOverMonthsChart = document.getElementById('revenueOverMonthsChart');
  const revenueOverDaysChart = document.getElementById('revenueOverDaysChart');
  const revenueOverHoursChart = document.getElementById('revenueOverHoursChart');

  // Select the "By years" option by default
  chartSelector.value = 'years';
  revenueOverYearsChart.style.display = 'block';

  // Create an event listener for the select element
  chartSelector.addEventListener('change', function () {
    const selectedOption = this.value;
    console.log(selectedOption);

    // Hide all chart containers
    revenueOverYearsChart.style.display = 'none';
    revenueOverMonthsChart.style.display = 'none';
    revenueOverDaysChart.style.display = 'none';
    revenueOverHoursChart.style.display = 'none';

    // Show the selected chart container based on the option
    if (selectedOption === 'years') {
      revenueOverYearsChart.style.display = 'block';
    } else if (selectedOption === 'months') {
      revenueOverMonthsChart.style.display = 'block';
    } else if (selectedOption === 'days') {
      revenueOverDaysChart.style.display = 'block';
    } else if (selectedOption === 'hours') {
      revenueOverHoursChart.style.display = 'block';
    }
  });

  // Fetch and populate orders
  fetchAndPopulateOrders(currency);
  
  // Dispatch a change event after setting the default value
  chartSelector.dispatchEvent(new Event('change'));
}

loadCategoryItems();




</script>


  <script>
    function getCurrency(){
    fetch('/api/env')
      .then(response => response.json())
      .then(data => {
        // Update the HTML content with the environment variable values
        document.getElementById('currency').innerText = data.currency;
        
      })
      .catch(error => console.error('Error fetching environment variables:', error));
    }
    getCurrency()

    
  </script>
	</body>
</html>